# Package name
name: poac
# Package version
version: 0.0.1
# 98, 03, 11(Include TR1), 14, 17, 20
cpp_version: 17
# clang or gcc or ICC or MSVC
# Specify range of executable version
compilers:
  clang: "6 <= v <= 7"
  gcc:   "7 <= v <= 8"
description: "poac is a package manager for C++."
# It must be the same as the user name
#  of the poac.pm account your created
owners:
  - matken11235
license: GPL-3.0
links:
  github: https://github.com/poacpm/poac

# Describe deps as dependencies
# Writing latest will automatically
#  fetch the latest package
deps:
  boostorg/boost:
    src: github
    tag: boost-1.67.0
    build: # If you use header-only library, does not necessary this key.
      system: manual
      steps: # TODO: 危険なコマンド対策．sudoが必要な場合，そもそもmanualを許可することは危険 # ダウンロードしてきたファイルのみ，docker attatch?
        - cd ${HOME}/.poac/cache/boost-1.67.0_tmp
        - git submodule update --init --recursive
        - ./bootstrap.sh
        - ./b2 install -j2 --prefix=${HOME}/.poac/cache/boost-1.67.0
    link:
      type: static # If dynamic -> global install
      include:
        - boost_system
        - boost_filesystem
        - boost_timer
        - boost_chrono
  curl/curl: # TODO: Cのバージョン管理
    src: github
    tag: curl-7_61_0
    build:
      system: cmake
      environment:
        MAC_RPATH: 1 # TODO: Branch by OS
        OPENSSL_ROOT_DIR: /usr/local/opt/openssl/ # TODO: 抽象化
    link: static
  jbeder/yaml-cpp:
    src: github
    tag: yaml-cpp-0.6.2
    build: cmake
    link: static

# If nothing is specified, it is regarded as header only library
build:
  system: poac
  # Enable binary install (for CLI application) (Include build process) # TODO: systemがpoacの時のみ
  bin: true # TODO: 複数のバイナリ生成対応
  # TODO: cmakeでは，targetに，それぞれのcppをaddしてる．
  # TODO: target(curl-config hoge.cpp foo.cpp)
  # TODO: target(curl        fuga.cpp buu.cpp)
#  lib: true # main.cpp以外をlibraryに変換します．
  macro:
    # TODO: 指定せずとも自動で定義しておくほうが良いかも．
    yamlmode: true #  Only one-dimensional information in poac.yml defined as a macro.
    POAC_ROOT: $PWD

# TODO: 一つのバイナリにリンクしたい時は？？？
test:
  framework: boost # or google
  args:
    - "--log_level=test_suite"
